/* --- Ailey & Bailey Canvas --- */
/* File: 004_panels.css */
/* Version: 14.0 (Custom Resizable Panels) */
/* Description: Removed native resize and added styles for custom resize handles. */

.draggable-panel {
    position: fixed;
    border-radius: 10px;
    box-shadow: 0 5px 20px rgba(0,0,0,0.3);
    display: none;
    flex-direction: column;
    overflow: hidden; /* [MODIFIED] Changed from 'auto' to 'hidden' */
    transition: all 0.3s ease-in-out;
    z-index: 1100;
    /* [REMOVED] resize: both; */
}
.draggable-panel.is-dragging { z-index: 1200; transition: none; }
body.dark-mode .draggable-panel { background-color: var(--container-bg-dark); border: 1px solid var(--border-color-dark); }
body:not(.dark-mode) .draggable-panel { background-color: var(--container-bg-light); border: 1px solid var(--border-color-light); }

/* Panel Focus Styles */
body.dark-mode .draggable-panel.panel-focused { border-color: var(--header-color-dark); box-shadow: 0 8px 25px rgba(212, 178, 140, 0.2); }
body:not(.dark-mode) .draggable-panel.panel-focused { border-color: var(--header-color-light); box-shadow: 0 8px 25px rgba(109, 93, 75, 0.2); }

.panel-header { padding: 10px; cursor: move; font-family: 'Noto Serif KR', serif; font-weight: bold; user-select: none; display: flex; justify-content: space-between; align-items: center; flex-wrap: nowrap; transition: background-color 0.3s, border-color 0.3s; position: sticky; top: 0; z-index: 1; }
body.dark-mode .panel-header { background-color: #2a2a2a; border-bottom: 1px solid var(--border-color-dark); }
body:not(.dark-mode) .panel-header { background-color: #eaddc7; border-bottom: 1px solid var(--border-color-light); }

.panel-controls { display: flex; align-items: center; gap: 8px; }
.panel-control-btn { cursor: pointer; background: none; border: none; padding: 0; line-height: 0; color: inherit; opacity: 0.7; transition: opacity 0.2s; }
.panel-control-btn:hover { opacity: 1; }
.panel-control-btn svg { fill: currentColor; }

/* --- Window Management States & Icons --- */
.draggable-panel.minimized { height: 42px !important; min-height: 42px !important; resize: none; overflow: hidden; }
.draggable-panel.maximized { top: 0 !important; left: 0 !important; width: 100% !important; height: 100% !important; border-radius: 0; resize: none; }
.draggable-panel.maximized .resize-handles { display: none; } /* Hide handles when maximized */

.panel-maximize-btn .icon-maximize, .panel-maximize-btn.is-maximized .icon-restore { display: block; }
.panel-maximize-btn .icon-restore, .panel-maximize-btn.is-maximized .icon-maximize { display: none; }
.draggable-panel.maximized .panel-minimize-btn { display: none; }

/* [NEW] Custom Resize Handle Styles */
.resize-handles .resizer {
    position: absolute;
    background: transparent;
    z-index: 5;
}
.resizer.right {
    top: 0; right: 0; width: 10px; height: 100%; cursor: ew-resize;
}
.resizer.bottom {
    bottom: 0; left: 0; width: 100%; height: 10px; cursor: ns-resize;
}
.resizer.bottom-right {
    bottom: 0; right: 0; width: 15px; height: 15px; cursor: se-resize; z-index: 6;
}


/* --- Settings Button & Popover Overrides --- */
/* Light Mode */
body:not(.dark-mode) #settings-button { background-color: var(--quote-bg-light); border-color: var(--border-color-light); color: var(--text-color-light); }
body:not(.dark-mode) #settings-button:hover { border-color: #A88A68; }
body:not(.dark-mode) #settings-popover { background-color: var(--container-bg-light) !important; backdrop-filter: none !important; }
body:not(.dark-mode) #settings-popover .popover-section select { background-color: white; border-color: var(--border-color-light); }
body:not(.dark-mode) #settings-popover .prompt-popover-group button { background-color: #e0d8ca; border-color: var(--border-color-light); }
body:not(.dark-mode) #settings-popover .prompt-popover-group button:hover { background-color: #d1c8bb; }

/* Dark Mode */
body.dark-mode #settings-button {
    background-color: #3f3f3f !important;
    border-color: var(--border-color-dark) !important;
    color: var(--text-color-dark) !important;
}
body.dark-mode #settings-button:hover {
    background-color: #555 !important;
    border-color: #D4B28C !important;
}
body.dark-mode #settings-popover {
    background-color: var(--container-bg-dark) !important;
    border-color: var(--border-color-dark) !important;
    backdrop-filter: none !important;
}
body.dark-mode #settings-popover .popover-section select {
    background-color: var(--quote-bg-dark) !important;
    border-color: var(--border-color-dark) !important;
    color: var(--text-color-dark) !important;
}
body.dark-mode #settings-popover .prompt-popover-group button {
    background-color: #3f3f3f !important;
    border-color: var(--border-color-dark) !important;
    color: var(--text-color-dark) !important;
}
body.dark-mode #settings-popover .prompt-popover-group button:hover {
    background-color: #555 !important;
}
