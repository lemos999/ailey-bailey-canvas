:root{--bg-color-light:#fdf8f0;--text-color-light:#4b4237;--container-bg-light:#f7f3e9;--border-color-light:#eae0d3;--header-color-light:#6d5d4b;--h2-color-light:#8c6d46;--h2-border-light:#b99c7a;--sub-text-color-light:#8c7b6a;--quote-bg-light:#f2eee5;--strong-bg-light:#eadcb5;--highlight-color:#ffe875;--chat-ai-bg-light:#e9e4db;--pin-color:#e58a8a;--correct-color:#3e8e41;--incorrect-color:#d9534f;--bg-color-dark:#121212;--text-color-dark:#e0e0e0;--container-bg-dark:#1e1e1e;--border-color-dark:#333;--header-color-dark:#d4b28c;--h2-color-dark:#b99c7a;--h2-border-dark:#8c6d46;--sub-text-color-dark:#9e9e9e;--quote-bg-dark:#2a2a2a;--strong-bg-dark:#5a4a3a;--chat-ai-bg-dark:#2c2c2c;--correct-color-dark:#66bb6a;--incorrect-color-dark:#ef5350}html{scroll-behavior:smooth}body{box-sizing:border-box;font-family:Gowun Batang,serif;line-height:1.8;margin:0;padding:80px 20px 20px;transition:background-color .3s,color .3s}body.dark-mode{background-color:var(--bg-color-dark);color:var(--text-color-dark)}body:not(.dark-mode){background-color:var(--bg-color-light);color:var(--text-color-light)}#immersive-header{align-items:center;backdrop-filter:blur(8px);display:flex;justify-content:space-between;left:0;padding:10px 20px;position:fixed;right:0;top:0;transform:translateY(-100%);transition:transform .4s ease-in-out,background-color .3s;z-index:1000}body.header-visible #immersive-header{transform:translateY(0)}body.dark-mode #immersive-header{background-color:hsla(0,0%,7%,.7);border-bottom:1px solid var(--border-color-dark)}body:not(.dark-mode) #immersive-header{background-color:hsla(37,76%,97%,.7);border-bottom:1px solid var(--border-color-light)}.header-group{align-items:center;display:flex;gap:20px}.header-group.left{flex:1 1 0;justify-content:flex-start}.header-group.center{flex:2 1 0;justify-content:center}.header-group.right{flex:1 1 0;justify-content:flex-end}.brand-logo{font-family:Nanum Pen Script,cursive;font-size:1.7em;font-weight:700;letter-spacing:.5px;opacity:0;transition:opacity .5s ease-in-out;user-select:none;visibility:hidden}body:not(.dark-mode) .brand-logo{color:var(--header-color-light)}body.dark-mode .brand-logo{color:var(--header-color-dark)}.brand-logo small{font-size:.6em;font-weight:400;margin-left:4px;vertical-align:middle}body:not(.dark-mode) .brand-logo small{color:var(--sub-text-color-light)}body.dark-mode .brand-logo small{color:var(--sub-text-color-dark)}::-webkit-scrollbar{height:8px;width:8px}::-webkit-scrollbar-track{background:transparent}body.dark-mode ::-webkit-scrollbar-thumb{background-clip:content-box;background-color:var(--border-color-dark);border:2px solid transparent;border-radius:10px}body.dark-mode ::-webkit-scrollbar-thumb:hover{background-color:var(--sub-text-color-dark)}body:not(.dark-mode) ::-webkit-scrollbar-thumb{background-clip:content-box;background-color:var(--sub-text-color-light);border:2px solid transparent;border-radius:10px}body:not(.dark-mode) ::-webkit-scrollbar-thumb:hover{background-color:var(--header-color-light)}.wrapper{display:flex;gap:20px;margin:20px auto;max-width:1100px}.container{border-radius:12px;box-shadow:0 10px 30px rgba(0,0,0,.07);flex-grow:1;max-width:800px;padding:30px 40px}.header{margin-bottom:30px;padding-bottom:20px;text-align:center}body.dark-mode .header{border-bottom:2px solid var(--border-color-dark)}body:not(.dark-mode) .header{border-bottom:2px solid var(--border-color-light)}.header h1{font-family:"Noto Serif KR",serif;font-size:2.8em;font-weight:600;margin:0}body.dark-mode .header h1{color:var(--header-color-dark)}body:not(.dark-mode) .header h1{color:var(--header-color-light)}.header .subtitle{font-size:1.1em}body.dark-mode .header .subtitle{color:var(--sub-text-color-dark)}body:not(.dark-mode) .header .subtitle{color:var(--sub-text-color-light)}.content-section{margin-bottom:35px;padding-top:20px}.content-section h2{font-family:"Noto Serif KR",serif;font-size:1.8em;margin-bottom:20px;padding-left:15px}body.dark-mode .content-section h2{border-left:4px solid var(--h2-border-dark);color:var(--h2-color-dark)}body:not(.dark-mode) .content-section h2{border-left:4px solid var(--h2-border-light);color:var(--h2-color-light)}.content-section h3 strong{border-radius:6px;display:inline-block;margin-bottom:10px;padding:5px 12px}body.dark-mode .content-section h3 strong{background-color:var(--strong-bg-dark);color:var(--header-color-dark)}body:not(.dark-mode) .content-section h3 strong{background-color:var(--strong-bg-light);color:var(--header-color-light)}.content-section p{font-size:1.1em;margin-bottom:15px;text-align:justify}.content-section ul{list-style-position:inside;padding-left:5px}.content-section li{margin-bottom:8px}.content-section p strong{border-radius:4px;font-weight:700;padding:0 6px}body.dark-mode .content-section p strong{background-color:var(--strong-bg-dark);color:var(--text-color-dark)}body:not(.dark-mode) .content-section p strong{background-color:var(--strong-bg-light);color:var(--header-color-light)}blockquote{font-style:italic;margin:25px 0;padding:15px 25px}body.dark-mode blockquote{background-color:var(--quote-bg-dark);border-left:3px solid var(--border-color-dark);color:var(--sub-text-color-dark)}body:not(.dark-mode) blockquote{background-color:var(--quote-bg-light);border-left:3px solid var(--border-color-light);color:var(--sub-text-color-light)}.keyword-list{align-items:center;border-radius:8px;display:flex;flex-wrap:wrap;gap:12px;margin:10px 0;padding:20px}body.dark-mode .keyword-list{background-color:var(--quote-bg-dark)}body:not(.dark-mode) .keyword-list{background-color:var(--quote-bg-light)}.keyword-chip{background-color:#b97f74;border-radius:15px;box-shadow:0 2px 4px rgba(0,0,0,.1);color:#faf7f2;font-size:1em;font-weight:700;padding:5px 13px}#live-debugger-panel{backdrop-filter:blur(5px);background-color:rgba(0,0,0,.85);border:1px solid #555;border-radius:10px;bottom:20px;box-shadow:0 5px 20px rgba(0,0,0,.4);color:#f0f0f0;display:flex;flex-direction:column;font-family:D2Coding,Consolas,monospace;font-size:12px;height:300px;position:fixed;right:20px;width:450px;z-index:9999}#live-debugger-header{align-items:center;background-color:#333;border-bottom:1px solid #555;display:flex;font-weight:700;justify-content:space-between;padding:8px 12px}#live-debugger-header span{color:#ff6b6b}#live-debugger-header button{background:#555;border:1px solid #777;border-radius:4px;color:#fff;cursor:pointer;font-size:11px;padding:2px 8px}#live-debugger-header button:hover{background:#666}#live-debugger-content{flex-grow:1;line-height:1.6;overflow-y:auto;padding:10px}.trace-log-entry{border-bottom:1px dotted #444;margin-bottom:8px;padding-bottom:8px}.trace-log-entry:last-child{border-bottom:none}.trace-timestamp{color:#888;margin-right:8px}.trace-source{font-weight:700;margin-right:5px}.trace-source-UI{color:#74b9ff}.trace-source-Firestore{color:#fdcb6e}.trace-source-API{color:#a29bfe}.trace-source-System{color:#55efc4}.trace-eventName{color:#dfe6e9}.trace-context{color:#fab1a0;font-style:italic;margin:0 5px}.trace-details{color:#b2bec3}.trace-snapshot{background-color:hsla(0,0%,100%,.05);border-radius:4px;margin-top:5px;padding:5px}.trace-snapshot-key{color:#00b894;font-weight:700}.trace-snapshot-value{color:#e17055}.trace-level-WARN{border-left:2px solid #fdcb6e;padding-left:8px}.trace-level-ERROR{background-color:rgba(214,48,49,.1);border-left:2px solid #d63031;padding-left:8px}.has-tooltip{cursor:help;position:relative}.tooltip{border:1px solid;border-radius:6px;bottom:130%;box-shadow:0 4px 15px rgba(0,0,0,.2);font-family:Gowun Batang,serif;font-size:.95em;left:50%;line-height:1.6;margin-left:-125px;opacity:0;padding:10px 12px;position:absolute;text-align:left;transition:opacity .3s;visibility:hidden;width:250px;z-index:10}body.dark-mode .tooltip{background-color:#2c2c2c;border-color:#444;color:var(--text-color-dark)}body:not(.dark-mode) .tooltip{background-color:ivory;border-color:var(--border-color-light);color:var(--text-color-light)}.tooltip:after{border-style:solid;border-width:5px;content:"";left:50%;margin-left:-5px;position:absolute;top:100%;transition:border-color .3s}body.dark-mode .tooltip:after{border-color:#2c2c2c transparent transparent}body:not(.dark-mode) .tooltip:after{border-color:ivory transparent transparent}.has-tooltip:hover .tooltip{opacity:1;visibility:visible}#system-info-widget{text-align:left}#real-time-clock{font-size:.9em;font-weight:700}#canvas-id-container{align-items:center;display:flex;font-size:.75em;gap:8px;margin-top:2px;opacity:.7}#copy-canvas-id{align-items:center;cursor:pointer;display:inline-flex;justify-content:center;transition:transform .2s}#copy-canvas-id svg{fill:currentColor}#copy-canvas-id:hover{transform:scale(1.2)}#selection-popover{background-color:#333;border-radius:8px;box-shadow:0 4px 15px rgba(0,0,0,.3);color:#fff;display:none;gap:5px;padding:5px;position:absolute;z-index:1600}#selection-popover button{align-items:center;background-color:#4a4a4a;border:none;border-radius:5px;color:#fff;cursor:pointer;display:flex;gap:8px;justify-content:center;padding:8px 12px}#selection-popover button:hover{background-color:#5f5f5f}#selection-popover button svg{fill:currentColor}.custom-modal-overlay{align-items:center;background:rgba(0,0,0,.6);display:none;height:100%;justify-content:center;left:0;position:fixed;top:0;width:100%;z-index:2000}.custom-modal{border-radius:10px;max-width:450px;padding:30px;text-align:center;width:90%}body:not(.dark-mode) .custom-modal{background-color:var(--bg-color-light)}body.dark-mode .custom-modal{background-color:var(--container-bg-dark)}.custom-modal-actions{display:flex;gap:15px;justify-content:center;margin-top:20px}.modal-btn{border:none;border-radius:5px;cursor:pointer;padding:10px 25px}#api-settings-save-btn,#modal-confirm-btn,#prompt-save-btn{background-color:#8c6d46;color:#fff}#api-settings-cancel-btn,#modal-cancel-btn,#prompt-cancel-btn{background-color:#888;color:#fff}#copy-modal-container{max-width:600px;padding:20px;width:90%}#copy-modal-container p{font-size:1.1em;margin-bottom:15px;margin-top:0}#copy-modal-textarea{border-radius:6px;font-family:D2Coding,Consolas,monospace;font-size:.9em;height:300px;padding:10px;resize:none;width:100%}body:not(.dark-mode) #copy-modal-textarea{background-color:#fff;border-color:var(--border-color-light);color:var(--text-color-light)}body.dark-mode #copy-modal-textarea{background-color:var(--quote-bg-dark);border-color:var(--border-color-dark);color:var(--text-color-dark)}.api-settings-modal{max-width:650px;text-align:left}.api-settings-modal h3{align-items:center;display:flex;gap:10px;justify-content:center;margin-bottom:10px}.api-modal-desc{font-size:.9em;margin-bottom:30px;opacity:.8;text-align:center}.api-form-section{margin-bottom:25px}.api-form-section label{display:block;font-size:1em;font-weight:700;margin-bottom:8px}.api-form-section small{display:block;font-size:.8em;margin-top:5px;opacity:.7}.api-key-wrapper{align-items:center;display:flex;gap:10px}.api-settings-modal input[type=number],.api-settings-modal input[type=password],.api-settings-modal input[type=text],.api-settings-modal select{background-color:var(--bg-color-dark);border:1px solid var(--border-color-dark);border-radius:6px;box-sizing:border-box;color:var(--text-color-dark);font-family:Gowun Batang,serif;font-size:1em;padding:10px 12px;width:100%}body:not(.dark-mode) .api-settings-modal input,body:not(.dark-mode) .api-settings-modal select{background-color:#fff;border-color:var(--border-color-light);color:var(--text-color-light)}.api-key-wrapper input{flex-grow:1}#verify-api-key-btn{background-color:var(--h2-color-dark);border:none;border-radius:6px;color:#fff;cursor:pointer;font-family:Gowun Batang,serif;padding:10px 15px;white-space:nowrap}body:not(.dark-mode) #verify-api-key-btn{background-color:var(--h2-color-light)}#verify-api-key-btn:disabled{cursor:not-allowed;opacity:.5}#api-key-status{font-size:.85em;font-weight:700;margin-top:8px;min-height:1.2em}.status-loading{color:var(--h2-color-dark)}body:not(.dark-mode) .status-loading{color:var(--h2-color-light)}.status-success{color:var(--correct-color-dark)}body:not(.dark-mode) .status-success{color:var(--correct-color)}.status-error{color:var(--incorrect-color-dark)}body:not(.dark-mode) .status-error{color:var(--incorrect-color)}.token-limit-wrapper{max-width:250px}.token-usage-section{border-radius:8px;margin-top:10px;padding:15px}body:not(.dark-mode) .token-usage-section{background-color:var(--quote-bg-light)}body.dark-mode .token-usage-section{background-color:var(--quote-bg-dark)}#token-usage-display{align-items:center;display:flex;flex-wrap:wrap;font-size:1.1em;gap:15px;margin-bottom:15px}#token-usage-display strong{color:var(--header-color-dark)}body:not(.dark-mode) #token-usage-display strong{color:var(--header-color-light)}#reset-token-usage-btn{background:none;border:1px solid;border-radius:12px;color:inherit;cursor:pointer;font-size:.8em;opacity:.7;padding:4px 10px;transition:opacity .2s}#reset-token-usage-btn:hover{opacity:1}#api-settings-reset-btn{background-color:#a94442;color:#fff}#api-settings-reset-btn:hover{background-color:#8a2a27}#quiz-modal-overlay{background:rgba(0,0,0,.7)}.quiz-modal{max-width:600px;width:90%}body:not(.dark-mode) .quiz-modal{background-color:var(--bg-color-light)}body.dark-mode .quiz-modal{background-color:var(--container-bg-dark)}#quiz-container{margin-bottom:20px}.quiz-question-block{border-left:3px solid var(--h2-border-light);margin-bottom:25px;padding-left:15px}body:dark-mode .quiz-question-block{border-left-color:var(--h2-border-dark)}.quiz-question-block p{font-size:1.1em;font-weight:700}.quiz-options label{border:1px solid transparent;border-radius:5px;cursor:pointer;display:block;margin:8px 0;padding:10px;transition:all .2s}body:not(.dark-mode) .quiz-options label:hover{background-color:var(--quote-bg-light)}body.dark-mode .quiz-options label:hover{background-color:var(--quote-bg-dark)}.quiz-options input[type=radio]{margin-right:10px}#quiz-submit-btn{background-color:var(--h2-color-dark);border:none;border-radius:5px;color:#fff;cursor:pointer;font-weight:700;padding:10px 25px}body:not(:dark-mode) #quiz-submit-btn{background-color:var(--h2-color-light)}#quiz-results{font-size:1.2em;font-weight:700;margin-top:20px}#prompt-modal-overlay textarea{background:var(--bg-color-dark);border:1px solid var(--border-color-dark);border-radius:5px;color:var(--text-color-dark);height:150px;margin-top:15px;padding:10px;width:100%}body:not(.dark-mode) #prompt-modal-overlay textarea{background:var(--bg-color-light);border-color:var(--border-color-light);color:var(--text-color-light)}@keyframes toast-in{0%{opacity:0;transform:translateX(100%)}to{opacity:1;transform:translateX(0)}}@keyframes toast-out{0%{opacity:1;transform:translateX(0)}to{opacity:0;transform:translateX(120%)}}.toast-notification{align-items:center;animation:toast-in .5s forwards;border-radius:8px;box-shadow:0 5px 20px rgba(0,0,0,.25);cursor:pointer;display:flex;gap:15px;max-width:350px;min-width:250px;padding:15px 20px;position:fixed;right:20px;top:20px;z-index:9999}.toast-notification.exiting{animation:toast-out .5s forwards}body.dark-mode .toast-notification{background-color:var(--container-bg-dark);border:1px solid var(--border-color-dark);color:var(--text-color-dark)}body:not(.dark-mode) .toast-notification{background-color:var(--container-bg-light);border:1px solid var(--border-color-light);color:var(--text-color-light)}.toast-icon{font-size:1.5em;line-height:0}.toast-content p{font-size:.95em;font-weight:700;margin:0}.toast-content small{display:block;font-size:.85em;margin-top:4px;opacity:.7;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}#quick-query-container{align-items:center;display:flex;max-width:600px;transition:all .3s ease;width:100%}#quick-query-temp-toggle{align-items:center;background:none;border:1px solid;border-radius:18px 0 0 18px;border-right:none;cursor:pointer;display:flex;flex-shrink:0;height:36px;justify-content:center;opacity:.6;padding:0 8px;transition:all .3s;width:40px}#quick-query-temp-toggle.active{opacity:1}#quick-query-temp-toggle svg{fill:currentColor}body.dark-mode #quick-query-temp-toggle{border-color:var(--border-color-dark);color:var(--text-color-dark)}body:not(.dark-mode) #quick-query-temp-toggle{border-color:var(--border-color-light);color:var(--text-color-light)}body.dark-mode #quick-query-temp-toggle.active{background-color:var(--h2-border-dark)}body:not(.dark-mode) #quick-query-temp-toggle.active{background-color:var(--h2-border-light)}#quick-query-input{border:1px solid;border-left:none;border-right:none;box-sizing:border-box;flex-grow:1;font-family:Gowun Batang,serif;font-size:.95em;height:36px;max-height:36px;outline:none;overflow-y:auto;padding:6px 15px;resize:none}#quick-query-send-btn{align-items:center;border:1px solid;border-left:none;box-sizing:border-box;cursor:pointer;display:flex;flex-shrink:0;height:36px;justify-content:center;padding:0 12px;transition:all .3s;width:44px}#quick-query-input,#quick-query-send-btn{border-radius:0}#quick-query-send-btn{border-radius:0 18px 18px 0}#quick-query-send-btn svg{fill:currentColor}body.dark-mode #quick-query-input{background-color:rgba(42,42,42,.8);border-color:var(--border-color-dark);color:var(--text-color-dark)}body:not(.dark-mode) #quick-query-input{background-color:hsla(0,0%,100%,.8);border-color:var(--border-color-light);color:var(--text-color-light)}body.dark-mode #quick-query-send-btn{border-color:var(--border-color-dark);color:var(--header-color-dark)}body:not(.dark-mode) #quick-query-send-btn{border-color:var(--border-color-light);color:var(--header-color-light)}body.dark-mode #quick-query-input:focus,body.dark-mode #quick-query-send-btn:hover,body.dark-mode #quick-query-temp-toggle:hover{background-color:var(--quote-bg-dark)}body:not(.dark-mode) #quick-query-input:focus,body:not(.dark-mode) #quick-query-send-btn:hover,body:not(.dark-mode) #quick-query-temp-toggle:hover{background-color:#fff}.fixed-tool-container{align-items:center;display:flex;gap:10px;position:relative}.tool-button{align-items:center;border-radius:50%;cursor:pointer;display:flex;height:40px;justify-content:center;transition:all .3s;user-select:none;width:40px}.tool-button svg{fill:currentColor;transition:transform .2s}.tool-button:hover svg{transform:scale(1.1)}body.dark-mode .tool-button:hover{background-color:var(--quote-bg-dark)}body:not(.dark-mode) .tool-button:hover{background-color:var(--quote-bg-light)}.loader-text{font-size:.9em;font-weight:700;left:50%;opacity:0;position:absolute;top:50%;transform:translate(-50%,-50%);transition:opacity .3s ease-in-out;z-index:2}.controls-disabled,.loader-text{pointer-events:none}.controls-disabled .tool-button{opacity:.3}.controls-disabled .loader-text{opacity:1}body:not(.dark-mode) .loader-text{color:var(--text-color-light)}body.dark-mode .loader-text{color:var(--text-color-dark)}.draggable-panel{border-radius:10px;box-shadow:0 5px 20px rgba(0,0,0,.3);display:none;flex-direction:column;overflow:auto;position:fixed;resize:both;transition:all .3s ease-in-out;z-index:1100}.draggable-panel.is-dragging{transition:none;z-index:1200}body.dark-mode .draggable-panel{background-color:var(--container-bg-dark);border:1px solid var(--border-color-dark)}body:not(.dark-mode) .draggable-panel{background-color:var(--container-bg-light);border:1px solid var(--border-color-light)}body.dark-mode .draggable-panel.panel-focused{border-color:var(--header-color-dark);box-shadow:0 8px 25px hsla(32,46%,69%,.2)}body:not(.dark-mode) .draggable-panel.panel-focused{border-color:var(--header-color-light);box-shadow:0 8px 25px rgba(109,93,75,.2)}.panel-header{align-items:center;cursor:move;display:flex;flex-wrap:nowrap;font-family:"Noto Serif KR",serif;font-weight:700;justify-content:space-between;padding:10px;position:sticky;top:0;transition:background-color .3s,border-color .3s;user-select:none;z-index:1}body.dark-mode .panel-header{background-color:#2a2a2a;border-bottom:1px solid var(--border-color-dark)}body:not(.dark-mode) .panel-header{background-color:#eaddc7;border-bottom:1px solid var(--border-color-light)}.panel-controls{align-items:center;display:flex;gap:8px}.panel-control-btn{background:none;border:none;color:inherit;cursor:pointer;line-height:0;opacity:.7;padding:0;transition:opacity .2s}.panel-control-btn:hover{opacity:1}.panel-control-btn svg{fill:currentColor}.draggable-panel.minimized{height:42px!important;min-height:42px!important;overflow:hidden;resize:none}.draggable-panel.maximized{border-radius:0;height:100%!important;left:0!important;resize:none;top:0!important;width:100%!important}.panel-maximize-btn .icon-maximize,.panel-maximize-btn.is-maximized .icon-restore{display:block}.draggable-panel.maximized .panel-minimize-btn,.panel-maximize-btn .icon-restore,.panel-maximize-btn.is-maximized .icon-maximize{display:none}body:not(.dark-mode) #settings-button{background-color:var(--quote-bg-light);border-color:var(--border-color-light);color:var(--text-color-light)}body:not(.dark-mode) #settings-button:hover{border-color:#a88a68}body:not(.dark-mode) #settings-popover{backdrop-filter:none!important;background-color:var(--container-bg-light)!important}body:not(.dark-mode) #settings-popover .popover-section select{background-color:#fff;border-color:var(--border-color-light)}body:not(.dark-mode) #settings-popover .prompt-popover-group button{background-color:#e0d8ca;border-color:var(--border-color-light)}body:not(.dark-mode) #settings-popover .prompt-popover-group button:hover{background-color:#d1c8bb}body.dark-mode #settings-button{background-color:#3f3f3f!important;border-color:var(--border-color-dark)!important;color:var(--text-color-dark)!important}body.dark-mode #settings-button:hover{background-color:#555!important;border-color:#d4b28c!important}body.dark-mode #settings-popover{backdrop-filter:none!important;background-color:var(--container-bg-dark)!important;border-color:var(--border-color-dark)!important}body.dark-mode #settings-popover .popover-section select{background-color:var(--quote-bg-dark)!important;border-color:var(--border-color-dark)!important;color:var(--text-color-dark)!important}body.dark-mode #settings-popover .prompt-popover-group button{background-color:#3f3f3f!important;border-color:var(--border-color-dark)!important;color:var(--text-color-dark)!important}body.dark-mode #settings-popover .prompt-popover-group button:hover{background-color:#555!important}@keyframes blink{50%{border-color:transparent}}.blinking-cursor:after{animation:blink 1s infinite;background-color:currentColor;content:"";display:inline-block;height:1.2em;margin-left:3px;vertical-align:middle;width:1px}@keyframes pulse{0%,80%,to{opacity:.5;transform:scale(0)}40%{opacity:1;transform:scale(1)}}.loading-animation{align-items:center;display:flex;gap:5px}.loading-animation .dot{animation:pulse 1.4s ease-in-out infinite both;background-color:currentColor;border-radius:50%;height:8px;width:8px}.loading-animation .dot:first-child{animation-delay:-.32s}.loading-animation .dot:nth-child(2){animation-delay:-.16s}#chat-panel{bottom:100px;flex-direction:row;height:600px;min-height:350px;min-width:350px;overflow:hidden;right:100px;width:700px}#chat-session-sidebar{display:flex;flex-direction:column;flex-shrink:0;overflow:hidden;transition:width .3s ease,padding .3s ease,border-color .3s;white-space:nowrap;width:220px}#chat-panel.sidebar-collapsed #chat-session-sidebar{border-right-width:0;padding-left:0;padding-right:0;width:0}#sidebar-toggle-btn{align-items:center;background:none;border:none;border-radius:5px;cursor:pointer;display:flex;flex-shrink:0;justify-content:center;margin-right:8px;padding:5px}#sidebar-toggle-btn svg{transition:transform .3s ease;fill:currentColor}#chat-panel.sidebar-collapsed #sidebar-toggle-btn svg{transform:rotate(180deg)}body.dark-mode #sidebar-toggle-btn:hover{background-color:var(--quote-bg-dark)}body:not(.dark-mode) #sidebar-toggle-btn:hover{background-color:var(--quote-bg-light)}.project-header{align-items:center;border-radius:6px;cursor:pointer;display:flex;padding:10px 5px;position:relative;transition:background-color .2s,border .2s}svg.project-toggle-icon{line-height:0;margin-right:5px;pointer-events:none;transition:transform .2s ease-in-out;fill:currentColor}svg.project-toggle-icon.expanded{transform:rotate(90deg)}.sessions-in-project{display:none;padding-left:20px}.sessions-in-project.expanded{display:block}body.dark-mode #chat-session-sidebar{border-right:1px solid var(--border-color-dark)}body:not(.dark-mode) #chat-session-sidebar{border-right:1px solid var(--border-color-light)}#sidebar-header{display:flex;flex-direction:column;flex-shrink:0;gap:10px;padding:10px}.sidebar-controls{align-items:center;display:flex;gap:8px}#search-sessions-input{border:1px solid;border-radius:20px;box-sizing:border-box;flex-grow:1;font-family:Gowun Batang,serif;min-width:0;outline:none;padding:8px 12px}#temp-session-toggle{align-items:center;background:none;border:1px solid;border-radius:50%;cursor:pointer;display:flex;flex-shrink:0;height:34px;justify-content:center;opacity:.6;transition:all .3s;width:34px}#temp-session-toggle.active{opacity:1}#temp-session-toggle svg{fill:currentColor}body.dark-mode #temp-session-toggle{border-color:var(--border-color-dark);color:var(--text-color-dark)}body:not(.dark-mode) #temp-session-toggle{border-color:var(--border-color-light);color:var(--text-color-light)}body.dark-mode #temp-session-toggle.active{background-color:var(--h2-border-dark)}body:not(.dark-mode) #temp-session-toggle.active{background-color:var(--h2-border-light)}body.dark-mode #search-sessions-input{background-color:var(--quote-bg-dark);border-color:var(--border-color-dark);color:var(--text-color-dark)}body:not(.dark-mode) #search-sessions-input{background-color:var(--quote-bg-light);border-color:var(--border-color-light);color:var(--text-color-light)}.sidebar-button-group{display:flex;gap:8px}.sidebar-button-group button{align-items:center;border:none;border-radius:8px;cursor:pointer;display:flex;flex-grow:1;font-family:Gowun Batang,serif;font-size:.95em;gap:6px;justify-content:center;padding:8px;transition:background-color .2s;white-space:nowrap}.sidebar-button-group button svg{fill:currentColor}body.dark-mode .sidebar-button-group button{background-color:var(--h2-color-dark);color:var(--bg-color-dark)}body:not(.dark-mode) .sidebar-button-group button{background-color:var(--h2-color-light);color:#fff}body.dark-mode .sidebar-button-group button:hover{background-color:#d4b28c}body:not(.dark-mode) .sidebar-button-group button:hover{background-color:#a88a68}#session-list-container{flex-grow:1;overflow-y:auto;padding:0 10px 10px}.date-group-header,.session-group-header{font-size:.8em;font-weight:700;letter-spacing:.5px;padding:15px 5px 5px;text-transform:uppercase}body.dark-mode .date-group-header,body.dark-mode .session-group-header{color:var(--sub-text-color-dark)}body:not(.dark-mode) .date-group-header,body:not(.dark-mode) .session-group-header{color:var(--sub-text-color-light)}.session-group-header{font-size:.9em}.session-item{align-items:center;border-radius:6px;cursor:pointer;display:flex;font-size:.92em;justify-content:space-between;margin-bottom:4px;overflow:hidden;padding:7px 10px;position:relative;text-overflow:ellipsis;transition:background-color .2s,opacity .2s,border .2s;white-space:nowrap}.session-item.temporary{font-style:italic}body.dark-mode .session-item.temporary{background-color:rgba(42,42,42,.5)}body:not(.dark-mode) .session-item.temporary{background-color:hsla(42,33%,92%,.5)}.session-item.is-dragging{background-color:var(--h2-border-dark);cursor:grabbing;opacity:.5}.session-item.drag-over{background-color:var(--strong-bg-dark);border:2px dashed var(--h2-color-dark)}body:not(.dark-mode) .session-item.drag-over{background-color:var(--strong-bg-light);border-color:var(--h2-color-light)}.project-header.drag-over{background-color:var(--strong-bg-dark)!important;border:2px dashed var(--h2-color-dark)}body:not(.dark-mode) .project-header.drag-over{background-color:var(--strong-bg-light)!important;border-color:var(--h2-color-light)}body.dark-mode .session-item:hover{background-color:var(--quote-bg-dark)}body:not(.dark-mode) .session-item:hover{background-color:var(--quote-bg-light)}.session-item.active{font-weight:700}body.dark-mode .session-item.active{background-color:var(--strong-bg-dark);color:var(--header-color-dark)}body:not(.dark-mode) .session-item.active{background-color:var(--strong-bg-light);color:var(--h2-color-light)}#chat-main-view{display:flex;flex-direction:column;flex-grow:1;min-width:0}#chat-main-view .panel-header{align-items:center;flex-direction:row;flex-wrap:nowrap}#chat-session-title{flex-grow:1;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.chat-header-right-group{align-items:center;display:flex;flex-shrink:0;gap:10px}#chat-control-deck{align-items:center;border-bottom:1px solid transparent;display:flex;gap:15px;justify-content:flex-end;padding:8px 10px}body:not(.dark-mode) #chat-control-deck{border-bottom-color:var(--border-color-light)}body.dark-mode #chat-control-deck{border-bottom-color:var(--border-color-dark)}#settings-control-container{position:relative}#settings-button{align-items:center;border:1px solid;border-radius:6px;cursor:pointer;display:flex;font-size:.9em;gap:8px;padding:6px 12px;transition:all .2s}#settings-button .settings-icon svg{fill:currentColor}#settings-display-text{max-width:300px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}#settings-popover{border:1px solid;border-radius:8px;box-shadow:0 5px 15px rgba(0,0,0,.2);display:none;margin-top:8px;padding:15px;position:absolute;right:0;top:100%;width:320px;z-index:1200}#settings-popover.show{display:block}.popover-section{margin-bottom:15px}.popover-section:last-of-type{margin-bottom:0}.popover-section label{display:block;font-size:.9em;font-weight:700;margin-bottom:8px}.popover-section select{border:1px solid;border-radius:6px;font-family:Gowun Batang,serif;padding:8px 10px;width:100%}.prompt-popover-group{display:flex;gap:8px}.prompt-popover-group select{flex-grow:1}.prompt-popover-group button{border:1px solid;border-radius:6px;cursor:pointer;flex-shrink:0;padding:0 10px}.chat-messages{gap:12px;overflow-y:auto;padding:15px}#chat-welcome-message,.chat-messages{display:flex;flex-direction:column;flex-grow:1}#chat-welcome-message{align-items:center;font-size:1.1em;height:100%;justify-content:center;opacity:.6;text-align:center;user-select:none}#chat-welcome-message h3{font-family:"Noto Serif KR",serif;margin-bottom:5px}.chat-message{border-radius:8px;line-height:1.6;max-width:85%;overflow-wrap:break-word;padding:12px 18px}.chat-message.user{align-items:flex-start;align-self:flex-end;border-left:3px solid #5e97f6;display:flex;flex-direction:column;padding-left:15px}body.dark-mode .chat-message.user{background-color:#2a2c3c}body:not(.dark-mode) .chat-message.user{background-color:#e8eaf6}.ai-response-container{align-self:flex-start;display:flex;flex-direction:column;gap:8px;max-width:90%;min-width:0}body:dark-mode .ai-response-container .chat-message.ai{background-color:transparent}body:not(.dark-mode) .ai-response-container .chat-message.ai{background-color:transparent}.ai-response-meta{align-items:center;display:flex;font-size:.8em;gap:5px;margin-left:5px;opacity:.6}.ai-response-meta svg{fill:currentColor}.chat-message.user p{margin-bottom:10px;margin-top:0}.chat-message.user p:last-child{margin-bottom:0}.attachment-chip{align-items:center;border-radius:16px;display:inline-flex;font-size:.9em;gap:8px;margin-top:5px;padding:6px 12px}.attachment-chip span{max-width:200px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}body.dark-mode .attachment-chip{background-color:hsla(0,0%,100%,.1);border:1px solid var(--border-color-dark)}body:not(.dark-mode) .attachment-chip{background-color:rgba(0,0,0,.05);border:1px solid var(--border-color-light)}.message-attachment-thumbnail{align-self:flex-start;border-radius:6px;margin-top:8px;max-height:250px;max-width:250px;object-fit:contain}.chat-input-form{align-items:center;border-top:1px solid;display:flex;padding:10px;transition:border-color .3s}body.dark-mode .chat-input-form{border-top-color:var(--border-color-dark)}body:not(.dark-mode) .chat-input-form{border-top-color:var(--border-color-light)}#chat-input{border:1px solid;border-radius:20px;flex-grow:1;font-family:Gowun Batang,serif;font-size:1em;line-height:1.6;max-height:98px;outline:none;overflow-y:auto;padding:10px 15px;resize:none;transition:all .3s}body.dark-mode #chat-input{background-color:#2a2a2a;border-color:var(--border-color-dark);color:var(--text-color-dark)}body:not(.dark-mode) #chat-input{background-color:#fff;border-color:var(--border-color-light);color:var(--text-color-light)}#chat-send-btn{align-items:center;background:none;border:none;cursor:pointer;display:flex;justify-content:center;padding:0 10px;transition:color .3s}#chat-send-btn svg{fill:currentColor}body.dark-mode #chat-send-btn{color:var(--header-color-dark)}body:not(.dark-mode) #chat-send-btn{color:var(--header-color-light)}#chat-attach-btn{align-items:center;background:none;border:none;cursor:pointer;display:flex;justify-content:center;margin-right:5px;opacity:.6;padding:0 8px;transition:opacity .3s}#chat-attach-btn:hover{opacity:1}#chat-attach-btn svg{fill:currentColor}#attached-file-display{align-items:flex-start;border-radius:8px;display:none;gap:10px;margin:0 10px 5px;padding:8px}body.dark-mode #attached-file-display{background-color:var(--quote-bg-dark)}body:not(.dark-mode) #attached-file-display{background-color:var(--quote-bg-light)}.file-info{align-items:center;display:flex;flex-grow:1;gap:8px;min-width:0}.file-info span{font-size:.9em;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.file-info svg{flex-shrink:0}.remove-file-btn{background:none;border:none;cursor:pointer;flex-shrink:0;font-size:1.2em;line-height:1;opacity:.7;padding:2px 5px}.remove-file-btn:hover{opacity:1}.attachment-preview-img{border-radius:4px;height:auto;max-height:60px;max-width:60px;object-fit:cover}body.dark-mode #chat-attach-btn,body.dark-mode #sidebar-toggle-btn{color:var(--text-color-dark)}body:not(.dark-mode) #chat-attach-btn,body:not(.dark-mode) #sidebar-toggle-btn{color:var(--text-color-light)}.prompt-manager-modal{height:80vh;max-height:600px;max-width:800px;overflow:hidden;padding:0;position:relative;width:95%}.prompt-manager-modal .close-btn{right:15px;top:15px}.prompt-manager-container{display:flex;height:100%;width:100%}.template-list-panel{display:flex;flex-direction:column;flex-shrink:0;padding:20px;width:250px}body.dark-mode .template-list-panel{background-color:var(--bg-color-dark);border-right:1px solid var(--border-color-dark)}body:not(.dark-mode) .template-list-panel{background-color:var(--bg-color-light);border-right:1px solid var(--border-color-light)}.template-list-panel h3{margin-bottom:15px;margin-top:0;text-align:center}#template-list-container{flex-grow:1;margin-bottom:15px;overflow-y:auto}.template-list-item{border-radius:6px;cursor:pointer;margin-bottom:5px;overflow:hidden;padding:10px 15px;text-overflow:ellipsis;transition:background-color .2s;white-space:nowrap}.template-list-item.is-default .item-name:after{content:" (기본)";font-size:.8em;margin-left:5px;opacity:.7}body:not(.dark-mode) .template-list-item:hover{background-color:var(--quote-bg-light)}body.dark-mode .template-list-item:hover{background-color:var(--quote-bg-dark)}body.dark-mode .template-list-item.active{background-color:var(--h2-color-dark);color:var(--bg-color-dark);font-weight:700}body:not(.dark-mode) .template-list-item.active{background-color:var(--h2-color-light);color:#fff;font-weight:700}.template-editor-panel{display:flex;flex-direction:column;flex-grow:1;padding:20px 30px}.editor-form-group{display:flex;flex-direction:column;margin-bottom:20px}.editor-form-group:last-of-type{flex-grow:1}.editor-form-group label{font-weight:700;margin-bottom:8px}.editor-form-group input,.editor-form-group textarea{border:1px solid;border-radius:6px;box-sizing:border-box;font-family:Gowun Batang,serif;font-size:1em;padding:10px 12px;width:100%}body:not(.dark-mode) .editor-form-group input,body:not(.dark-mode) .editor-form-group textarea{background-color:#fff;border-color:var(--border-color-light);color:var(--text-color-light)}body.dark-mode .editor-form-group input,body.dark-mode .editor-form-group textarea{background-color:var(--quote-bg-dark);border-color:var(--border-color-dark);color:var(--text-color-dark)}.editor-form-group textarea{flex-grow:1;resize:none}.editor-actions{display:flex;gap:15px;justify-content:flex-end;margin-top:20px}.editor-actions .modal-btn{border:none;border-radius:5px;cursor:pointer;padding:10px 25px}.editor-actions .modal-btn.confirm{background-color:var(--h2-color-light);color:#fff}body.dark-mode .editor-actions .modal-btn.confirm{background-color:var(--h2-color-dark);color:var(--bg-color-dark)}.editor-actions .modal-btn.cancel{background-color:#d9534f;color:#fff}.editor-actions .modal-btn:disabled{cursor:not-allowed;opacity:.5}@keyframes status-pulse{0%{background-color:#5e97f6;box-shadow:0 0 0 0 rgba(94,151,246,.7);transform:scale(.8)}70%{background-color:#8bb6f8;box-shadow:0 0 0 10px rgba(94,151,246,0);transform:scale(1)}to{background-color:#5e97f6;box-shadow:0 0 0 0 rgba(94,151,246,0);transform:scale(.8)}}@keyframes status-pulse-complete{0%{background-color:#d4b28c;box-shadow:0 0 0 0 hsla(32,46%,69%,.7);transform:scale(.8)}70%{background-color:#eadcb5;box-shadow:0 0 0 10px hsla(32,46%,69%,0);transform:scale(1)}to{background-color:#d4b28c;box-shadow:0 0 0 0 hsla(32,46%,69%,0);transform:scale(.8)}}.status-indicator{animation:status-pulse 2s infinite}.status-indicator,.status-indicator-complete{border-radius:50%;flex-shrink:0;height:8px;margin-left:auto;margin-right:5px;width:8px}.status-indicator-complete{animation:status-pulse-complete 2.5s infinite}.session-item-title{flex-grow:1;margin-right:5px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.project-actions-btn{background:none;border:none;border-radius:50%;cursor:pointer;flex-shrink:0;line-height:0;padding:3px;transition:background-color .2s,transform .2s}.project-actions-btn svg{fill:currentColor}body.dark-mode .project-actions-btn{color:var(--sub-text-color-dark)}body:not(.dark-mode) .project-actions-btn{color:var(--sub-text-color-light)}.project-actions-btn:hover{background-color:hsla(0,0%,50%,.2);transform:scale(1.1)}.prompt-manager-modal .close-btn{align-items:center;background:none;border:none;border-radius:50%;color:inherit;cursor:pointer;display:flex;height:36px;justify-content:center;opacity:.6;position:absolute;right:10px;top:10px;transition:background-color .2s,opacity .2s,transform .2s;width:36px;z-index:10}.prompt-manager-modal .close-btn:hover{opacity:1;transform:scale(1.1)}body:not(.dark-mode) .prompt-manager-modal .close-btn:hover{background-color:var(--quote-bg-light)}body.dark-mode .prompt-manager-modal .close-btn:hover{background-color:var(--quote-bg-dark)}#notes-app-panel{bottom:100px;height:700px;left:100px;overflow:hidden;padding:0;width:600px}.notes-view{display:none;flex-direction:column;height:100%}.notes-view.active{display:flex}#notes-app-panel .panel-header{box-sizing:border-box;width:100%}.action-bar{align-items:center;border-bottom:1px solid var(--border-color-dark);display:flex;flex-wrap:wrap;gap:10px;justify-content:space-between;padding:10px 15px}body:not(.dark-mode) .action-bar{border-bottom-color:var(--border-color-light)}.action-bar-group{align-items:center;display:flex;gap:10px}.action-bar-group.left{justify-content:flex-start}.action-bar-group.center{flex-grow:1;justify-content:center;min-width:120px}.action-bar-group.right{justify-content:flex-end}.search-input-notes{background-color:var(--quote-bg-dark);border:1px solid var(--border-color-dark);border-radius:20px;color:var(--text-color-dark);flex-grow:1;padding:8px 12px}body:not(.dark-mode) .search-input-notes{background-color:var(--quote-bg-light);border-color:var(--border-color-light);color:var(--text-color-light)}.notes-btn{align-items:center;background-color:var(--h2-color-dark);border:none;border-radius:20px;color:#fff;cursor:pointer;display:flex;gap:6px;justify-content:center;padding:8px 15px;white-space:nowrap}body:not(.dark-mode) .notes-btn{background-color:var(--h2-color-light)}.notes-btn svg{height:16px;width:16px;fill:currentColor}.more-options-container{position:relative}.more-options-btn{background:none;border:none;border-radius:50%;cursor:pointer;line-height:0;padding:5px}body.dark-mode .more-options-btn{color:var(--text-color-dark)}body:not(.dark-mode) .more-options-btn{color:var(--text-color-light)}.more-options-btn:hover{background-color:hsla(0,0%,50%,.2)}.dropdown-menu{background-color:var(--container-bg-dark);border:1px solid var(--border-color-dark);border-radius:6px;box-shadow:0 4px 12px rgba(0,0,0,.2);display:none;min-width:180px;padding:5px;position:absolute;right:0;top:100%;z-index:1550}body:not(.dark-mode) .dropdown-menu{background-color:var(--container-bg-light);border-color:var(--border-color-light)}.dropdown-menu.show{display:block}.dropdown-item{align-items:center;background:none;border:none;border-radius:4px;color:inherit;cursor:pointer;display:flex;font-family:Gowun Batang,serif;font-size:1em;gap:8px;padding:8px 12px;text-align:left;width:100%}body:not(.dark-mode) .dropdown-item:hover{background-color:var(--quote-bg-light)}body.dark-mode .dropdown-item:hover{background-color:var(--quote-bg-dark)}.dropdown-separator{background-color:var(--border-color-dark);height:1px;margin:4px 8px}body:not(.dark-mode) .dropdown-separator{background-color:var(--border-color-light)}#notes-list{flex-grow:1;overflow-y:auto;padding:10px}.note-group-header{color:var(--sub-text-color-dark);font-size:.9em;font-weight:700;padding:15px 5px 5px}body:not(.dark-mode) .note-group-header{color:var(--sub-text-color-light)}.note-project-container{margin-bottom:5px}.note-project-header{align-items:center;border-radius:6px;cursor:pointer;display:flex;padding:10px 5px;position:relative;transition:background-color .2s,border .2s}body:not(.dark-mode) .note-project-header:hover{background-color:var(--quote-bg-light)}body.dark-mode .note-project-header:hover{background-color:var(--quote-bg-dark)}.note-project-header.drag-over{background-color:var(--h2-border-light)!important;border:1px dashed var(--h2-color-light)}body.dark-mode .note-project-header.drag-over{background-color:var(--h2-border-dark)!important;border-color:var(--h2-color-dark)}.note-project-toggle-icon{line-height:0;margin-right:5px;transition:transform .2s ease-in-out}.note-project-toggle-icon.expanded{transform:rotate(90deg)}.note-project-icon{line-height:0;margin-right:8px}.note-project-header svg{fill:currentColor}.note-project-title{flex-grow:1;font-weight:700;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.note-count{color:var(--sub-text-color-dark);font-size:.8em;font-weight:400;margin-left:8px}body:not(.dark-mode) .note-count{color:var(--sub-text-color-light)}.note-item-title-input,.note-project-title-input{background:transparent;border:none;border-radius:4px;box-sizing:border-box;color:inherit;flex-grow:1;font-family:Gowun Batang,serif;font-size:1em;font-weight:700;outline:1px solid;padding:2px 4px}body.dark-mode .note-item-title-input,body.dark-mode .note-project-title-input{outline-color:var(--header-color-dark)}body:not(.dark-mode) .note-item-title-input,body:not(.dark-mode) .note-project-title-input{outline-color:var(--header-color-light)}.notes-in-project{max-height:0;overflow:hidden;padding-left:20px;transition:max-height .3s ease-in-out}.notes-in-project.expanded{max-height:1000px}.note-item{border-radius:6px;cursor:pointer;margin-bottom:8px;padding:12px 15px;position:relative;transition:background-color .2s}.note-item.is-dragging{background-color:var(--h2-border-dark);cursor:grabbing;opacity:.5}.note-item:hover{background-color:var(--quote-bg-dark)}body:not(.dark-mode) .note-item:hover{background-color:var(--quote-bg-light)}.note-item-title{font-weight:700;margin-bottom:4px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.note-item-date{font-size:.8em;opacity:.7}.note-item-actions{display:flex;gap:5px;opacity:0;pointer-events:none;position:absolute;right:10px;top:50%;transform:translateY(-50%);transition:opacity .2s}.note-item:hover .note-item-actions{opacity:1;pointer-events:auto}#note-editor-view .editor-header{align-items:center;border-bottom:1px solid var(--border-color-dark);display:flex;justify-content:space-between;padding:10px}body:not(.dark-mode) #note-editor-view .editor-header{border-bottom-color:var(--border-color-light)}#note-title-input{background:transparent;border:none;color:inherit;font-size:1.2em;font-weight:700;padding:10px 15px;width:100%}#toast-editor{box-sizing:border-box;flex-grow:1;width:100%}#auto-save-status{font-size:.8em;opacity:.7;padding:5px 15px;text-align:right}.tag-container{display:flex;flex-wrap:wrap;gap:8px;padding:5px 15px 10px}.note-tag{background-color:var(--h2-border-dark);border-radius:15px;color:var(--text-color-dark);cursor:pointer;font-size:.85em;padding:3px 10px}body:not(.dark-mode) .note-tag{background-color:var(--h2-border-light);color:var(--text-color-light)}.chat-message.ai h1,.chat-message.ai h2,.chat-message.ai h3,.chat-message.ai h4,.chat-message.ai h5,.chat-message.ai h6{font-family:"Noto Serif KR",serif;margin-bottom:.6em;margin-top:1.2em}.chat-message.ai h1{font-size:1.5em}.chat-message.ai h2{font-size:1.3em}.chat-message.ai h3{font-size:1.2em}.chat-message.ai p{line-height:1.7;margin-bottom:.8em}.chat-message.ai ol,.chat-message.ai ul{margin-bottom:1em;padding-left:25px}.chat-message.ai li{margin-bottom:.5em}.chat-message.ai blockquote{border-left:4px solid;border-radius:4px;margin:1em 0;padding:10px 15px}body:not(.dark-mode) .chat-message.ai blockquote{background-color:var(--quote-bg-light);border-color:var(--h2-border-light)}body.dark-mode .chat-message.ai blockquote{background-color:var(--quote-bg-dark);border-color:var(--h2-border-dark)}.chat-message.ai pre{border-radius:8px;font-family:D2Coding,Consolas,monospace;font-size:.95em;margin:1em 0;overflow:auto;padding:15px;white-space:pre-wrap;word-break:break-all}body:not(.dark-mode) .chat-message.ai pre{background-color:#f0f0f0;color:#333}body.dark-mode .chat-message.ai pre{background-color:#0d1117;color:#c9d1d9}.chat-message.ai code:not(pre>code){border-radius:6px;font-family:D2Coding,Consolas,monospace;font-size:85%;margin:0;padding:.2em .4em}body:not(.dark-mode) .chat-message.ai code:not(pre>code){background-color:rgba(0,0,0,.08)}body.dark-mode .chat-message.ai code:not(pre>code){background-color:hsla(0,0%,100%,.1)}.chat-message.ai table{border-collapse:collapse;margin:1em 0;width:100%}.chat-message.ai td,.chat-message.ai th{border:1px solid;padding:8px 12px}body:not(.dark-mode) .chat-message.ai td,body:not(.dark-mode) .chat-message.ai th{border-color:var(--border-color-light)}body.dark-mode .chat-message.ai td,body.dark-mode .chat-message.ai th{border-color:var(--border-color-dark)}body:not(.dark-mode) .chat-message.ai th{background-color:var(--quote-bg-light)}body.dark-mode .chat-message.ai th{background-color:var(--quote-bg-dark)}.katex-display{max-width:100%;overflow-x:auto;overflow-y:hidden;padding:.5em 0}.custom-context-menu{border-radius:8px;box-shadow:0 5px 20px rgba(0,0,0,.25);font-family:Gowun Batang,serif;font-size:.95em;min-width:200px;padding:5px;position:fixed;z-index:1550}body:not(.dark-mode) .custom-context-menu{background-color:var(--container-bg-light);border:1px solid var(--border-color-light);color:var(--text-color-light)}body.dark-mode .custom-context-menu{background-color:var(--container-bg-dark);border:1px solid var(--border-color-dark);color:var(--text-color-dark)}.custom-context-menu .context-menu-item{align-items:center;background:none;border:none;border-radius:6px;color:inherit;cursor:pointer;display:flex;font-family:inherit;font-size:inherit;justify-content:space-between;padding:9px 12px;text-align:left;white-space:nowrap;width:100%}body:not(.dark-mode) .custom-context-menu .context-menu-item:not([disabled]):hover{background-color:var(--quote-bg-light)}body.dark-mode .custom-context-menu .context-menu-item:not([disabled]):hover{background-color:var(--quote-bg-dark)}.custom-context-menu .context-menu-item[disabled]{cursor:not-allowed;opacity:.5}.custom-context-menu .context-menu-separator{height:1px;margin:5px 8px}body:not(.dark-mode) .custom-context-menu .context-menu-separator{background-color:var(--border-color-light)}body.dark-mode .custom-context-menu .context-menu-separator{background-color:var(--border-color-dark)}.custom-context-menu .submenu-container{position:relative}.custom-context-menu .submenu-arrow{font-size:.8em;margin-left:15px}.custom-context-menu .context-submenu{border-radius:8px;box-shadow:inherit;display:none;left:100%;min-width:150px;padding:5px;position:absolute;top:-6px}body:not(.dark-mode) .custom-context-menu .context-submenu{background-color:inherit;border:1px solid var(--border-color-light)}body.dark-mode .custom-context-menu .context-submenu{background-color:inherit;border:1px solid var(--border-color-dark)}.custom-context-menu .submenu-container:hover>.context-submenu{display:block}.message-toolbar{border-radius:8px;display:flex;flex-direction:column;gap:6px;opacity:0;padding:6px;pointer-events:none;position:absolute;top:4px;transform:scale(.95);transition:opacity .2s ease-in-out,transform .2s ease-in-out;z-index:10}body:not(.dark-mode) .message-toolbar{backdrop-filter:blur(4px);background-color:hsla(43,47%,94%,.8);border:1px solid var(--border-color-light)}body.dark-mode .message-toolbar{backdrop-filter:blur(4px);background-color:rgba(30,30,30,.8);border:1px solid var(--border-color-dark)}.message-toolbar.user-toolbar{left:-52px}.message-toolbar.ai-toolbar{right:-52px}.toolbar-button{align-items:center;border:none;border-radius:6px;cursor:pointer;display:flex;height:36px;justify-content:center;transition:background-color .2s,transform .1s;width:36px}body:not(.dark-mode) .toolbar-button{background-color:var(--quote-bg-light);color:var(--text-color-light)}body.dark-mode .toolbar-button{background-color:var(--quote-bg-dark);color:var(--text-color-dark)}body:not(.dark-mode) .toolbar-button:hover{background-color:#e6e0d4}body.dark-mode .toolbar-button:hover{background-color:#444}.toolbar-button:active{transform:scale(.9)}.toolbar-button svg{fill:currentColor;height:20px;width:20px}.ai-response-container.toolbar-active,.chat-message.user.toolbar-active{position:relative}.ai-response-container.toolbar-active .message-toolbar,.chat-message.user.toolbar-active .message-toolbar{opacity:1;pointer-events:auto;transform:scale(1)}.drawing-modal-overlay{align-items:center;background:rgba(0,0,0,.75);display:none;height:100%;justify-content:center;left:0;position:fixed;top:0;width:100%;z-index:2500}.drawing-modal-content{background:#2e2e2e;border-radius:10px;box-shadow:0 10px 30px rgba(0,0,0,.5);display:flex;flex-direction:column;height:90vh;width:90vw}.drawing-toolbar{background:#1e1e1e;border-bottom:1px solid #444;padding:10px}.drawing-canvas-container{flex-grow:1;position:relative}#drawing-canvas{left:0;position:absolute;top:0}.visualization-container{border-radius:12px;box-shadow:0 4px 15px rgba(0,0,0,.1);margin:1.5em 0;overflow:hidden;padding:20px;transition:all .3s ease-in-out}body:not(.dark-mode) .visualization-container{background-color:var(--quote-bg-light);border:1px solid var(--border-color-light)}body.dark-mode .visualization-container{background-color:#0d1117;border:1px solid var(--border-color-dark);box-shadow:0 4px 20px rgba(0,0,0,.3)}