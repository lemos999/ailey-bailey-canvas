# Ailey & Bailey Canvas 
[![License](https://img.shields.io/badge/License-Apache_2.0-blue.svg)](https://opensource.org/licenses/Apache-2.0)
---
## ğŸ‡°ğŸ‡· í•œê¸€
### 1. ê°œìš” (Abstract)
ì´ ë¬¸ì„œëŠ” Gemini ì–¸ì–´ ëª¨ë¸ì´ Google Canvas í™˜ê²½ ë‚´ì—ì„œ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ë™ì ìœ¼ë¡œ ìƒì„±í•˜ëŠ” Ailey & Bailey Canvas ì‹œìŠ¤í…œì˜ ì•„í‚¤í…ì²˜ ì„¤ê³„ ê³¼ì •ì„ ê¸°ë¡í•œ ê¸°ìˆ  ë¬¸ì„œì…ë‹ˆë‹¤. ì´ˆê¸° ë²„ì „ì—ì„œ ë°œê²¬ëœ AI ì‘ë‹µ ì§€ì—° ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´, ëª¨ë“  ì™¸ë¶€ CDN ì˜ì¡´ì„±ì„ ì œê±°í•˜ê³  í•„ìš”í•œ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ë‹¨ì¼ JavaScript íŒŒì¼ì— í†µí•©í•˜ëŠ” 'ì˜ì¡´ì„± ë‚´ì¬í™” ë° ë™ì  ì£¼ì…' ì•„í‚¤í…ì²˜ë¥¼ ì±„íƒí–ˆìŠµë‹ˆë‹¤. ì´ ë°©ì‹ì€ Google Canvasì˜ ë³´ì•ˆ ì •ì±…(CSP)ê³¼ ë„¤íŠ¸ì›Œí¬ ì œì•½ì´ë¼ëŠ” íŠ¹ìˆ˜í•œ í™˜ê²½ ì†ì—ì„œ ì•ˆì •ì ì¸ ì„±ëŠ¥ì„ í™•ë³´í•˜ê¸° ìœ„í•œ êµ¬ì¡°ì  í•´ë²•ì…ë‹ˆë‹¤. ì´ ë¬¸ì„œëŠ” í•´ë‹¹ ì•„í‚¤í…ì²˜ì˜ ì„¤ê³„ ë°°ê²½ê³¼ ê¸°ìˆ ì  ì˜ì‚¬ê²°ì • ê³¼ì •ì„ ê¸°ë¡í•˜ê³ ì í•©ë‹ˆë‹¤.

### 2. ë¬¸ì œì˜ ì‹œì‘: ì™œ ìƒˆë¡œìš´ ì•„í‚¤í…ì²˜ê°€ í•„ìš”í–ˆëŠ”ê°€?
Ailey & Bailey Canvasì˜ ì´ˆê¸° ì•„í‚¤í…ì²˜ëŠ” AIê°€ ë§¤ë²ˆ ì™„ì „í•œ HTML, CSS, JavaScript ì½”ë“œë¥¼ ìƒì„±í•˜ì—¬ Canvasì— ì „ë‹¬í•˜ëŠ” ì§ê´€ì ì¸ êµ¬ì¡°ì˜€ìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ ê¸°ëŠ¥ì´ ë³µì¡í•´ì§€ë©´ì„œ AIê°€ ìƒì„±í•˜ëŠ” ì½”ë“œì˜ ì–‘ì´ ëŠ˜ì–´ë‚¬ê³ , ì´ëŠ” ì‘ë‹µ ì†ë„ ì €í•˜ ë¬¸ì œë¡œ ì´ì–´ì¡ŒìŠµë‹ˆë‹¤.
ë” ê·¼ë³¸ì ì¸ ì œì•½ì€ Google Canvasì˜ ì‹¤í–‰ í™˜ê²½ì´ì—ˆìŠµë‹ˆë‹¤. CanvasëŠ” ë³´ì•ˆ ì •ì±…(CSP)ì— ë”°ë¼ ì‹ ë¢°í•˜ì§€ ì•ŠëŠ” ì™¸ë¶€ ì†ŒìŠ¤ì—ì„œì˜ ìŠ¤í¬ë¦½íŠ¸ ë¡œë”©ì„ ì°¨ë‹¨í•©ë‹ˆë‹¤. ì´ë¡œ ì¸í•´ Firebaseì™€ ê°™ì€ í•µì‹¬ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ CDNì„ í†µí•´ ë¡œë“œí•  ë•Œ íƒ€ì„ì•„ì›ƒ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆê³ , ì´ëŠ” ì‹œìŠ¤í…œ ì•ˆì •ì„±ì„ í™•ë³´í•˜ê¸° ì–´ë µê²Œ ë§Œë“¤ì—ˆìŠµë‹ˆë‹¤.
ë”°ë¼ì„œ ìš°ë¦¬ëŠ” ê¸°ì¡´ êµ¬ì¡°ë¥¼ ì¬ê²€í† í•˜ê³ , "ì£¼ì–´ì§„ Canvas í™˜ê²½ ì œì•½ ë‚´ì—ì„œ ì–´ë–»ê²Œ í•˜ë©´ ë” ë¹ ë¥´ê³  ì•ˆì •ì ìœ¼ë¡œ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ êµ¬ë™í•  ìˆ˜ ìˆì„ê¹Œ?" ë¼ëŠ” ê·¼ë³¸ì ì¸ ì§ˆë¬¸ì—ì„œë¶€í„° ì„¤ê³„ë¥¼ ë‹¤ì‹œ ì‹œì‘í–ˆìŠµë‹ˆë‹¤.

### 3. ì‘ë™ ì›ë¦¬
ì´ ì‹œìŠ¤í…œì˜ ì•„í‚¤í…ì²˜ëŠ” ë‘ ê°€ì§€ ì£¼ì²´ì˜ ì—­í• ì„ ê¸°ë°˜ìœ¼ë¡œ í•©ë‹ˆë‹¤.
1.  AI (Gemini): ì‚¬ìš©ìì˜ ìš”êµ¬ë¥¼ í•´ì„í•˜ì—¬, ê·¸ì— ë§ëŠ” 'ì½˜í…ì¸ 'ì™€ 'ì‹¤í–‰ ëª…ë ¹'ì„ ìƒì„±í•˜ëŠ” ì„¤ê³„ìì˜ ì—­í• ì„ í•©ë‹ˆë‹¤.
2.  í´ë¼ì´ì–¸íŠ¸ (Client): ì‚¬ìš©ìì˜ ë¸Œë¼ìš°ì €ì—ì„œ ì‹¤í–‰ë˜ë©°, ë¯¸ë¦¬ ì •ì˜ëœ UI 'ë¼ˆëŒ€(Shell)'ë¥¼ ê°€ì§€ê³  ìˆë‹¤ê°€ AIì˜ ëª…ë ¹ì— ë”°ë¼ ì½˜í…ì¸ ë¥¼ ì¡°ë¦½í•˜ì—¬ ê²°ê³¼ë¬¼ì„ ë§Œë“œëŠ” ì‹œê³µìì˜ ì—­í• ì„ í•©ë‹ˆë‹¤. ì´ ì‹œê³µìì˜ ëª¨ë“  ë„êµ¬ëŠ” `bundle/main.js`ì™€ `bundle/main.css` íŒŒì¼ ì•ˆì— ë‚´ì¥ë˜ì–´ ìˆìŠµë‹ˆë‹¤.
ì´ì „ì²˜ëŸ¼ AIê°€ ë§¤ë²ˆ ì§‘ ì „ì²´(Full HTML)ë¥¼ ì§“ëŠ” ëŒ€ì‹ , ìƒˆë¡œìš´ ì•„í‚¤í…ì²˜ì—ì„œëŠ” "ì´ ì½˜í…ì¸ ('dynamicContent')ë¥¼ ê°€ì§€ê³ , ì•½ì†ëœ ì„¤ê³„ë„(`renderAppShell` í•¨ìˆ˜)ì— ë”°ë¼ ì§‘ì„ ì™„ì„±í•˜ë¼" ëŠ” ê°€ë²¼ìš´ ëª…ë ¹ì„œ(Loader Script)ë§Œ ë³´ëƒ…ë‹ˆë‹¤. ì‹¤ì œ êµ¬í˜„ì€ í´ë¼ì´ì–¸íŠ¸ê°€ ì „ë‹´í•˜ëŠ” ë°©ì‹ì…ë‹ˆë‹¤.

### 4. ì•„í‚¤í…ì²˜ ì„¤ê³„ ê²°ì •
ì´ëŸ¬í•œ ì›ì¹™ ì•„ë˜, ë‘ ê°€ì§€ ê¸°ìˆ ì  ê²°ì •ì„ ë‚´ë ¸ìŠµë‹ˆë‹¤.

#### ê²°ì • 1: ì—­í• ì˜ ë¶„ë¦¬ - ë™ì  ì£¼ì… (Dynamic Injection)
*   ë¬¸ì œ ì¸ì‹: AIê°€ ë°˜ë³µì ì¸ UI ë¼ˆëŒ€ ì½”ë“œë¥¼ ë§¤ë²ˆ ìƒì„±í•˜ëŠ” ê²ƒì€ ë¹„íš¨ìœ¨ì ì¸ êµ¬ì¡°ì˜€ìŠµë‹ˆë‹¤.
*   í•´ê²°ì±…: UI ë¼ˆëŒ€ëŠ” í´ë¼ì´ì–¸íŠ¸ì˜ `bundle/main.js`ì— í…œí”Œë¦¿ í˜•íƒœë¡œ í•œ ë²ˆë§Œ ë‚´ì¥ì‹œì¼°ìŠµë‹ˆë‹¤. AIëŠ” ì´ì œ í•µì‹¬ 'ì½˜í…ì¸ 'ë§Œ ìƒì„±í•˜ì—¬ ì „ë‹¬í•˜ê³ , í´ë¼ì´ì–¸íŠ¸ëŠ” ì´ ì½˜í…ì¸ ë¥¼ í…œí”Œë¦¿ì˜ ì§€ì •ëœ ìœ„ì¹˜(`ai-content-placeholder`)ì— ì£¼ì…í•˜ì—¬ UIë¥¼ ì™„ì„±í•©ë‹ˆë‹¤.
*   ê²°ê³¼: ê²°ê³¼ì ìœ¼ë¡œ AIê°€ ìƒì„±í•˜ëŠ” ë°ì´í„°ì˜ ì–‘ì´ í¬ê²Œ ì¤„ì—ˆê³ , ì´ëŠ” ì‘ë‹µ ì‹œê°„ ë‹¨ì¶•ìœ¼ë¡œ ì´ì–´ì¡ŒìŠµë‹ˆë‹¤.
*   
#### ê²°ì • 2: ìì›ì˜ í†µí•© - ì˜ì¡´ì„± ë‚´ì¬í™” ë° ë²ˆë“¤ë§ (Total Internalization & Bundling)
*   ë¬¸ì œ ì¸ì‹: Google Canvasì˜ ë³´ì•ˆ ì •ì±…ìœ¼ë¡œ ì¸í•œ CDN ë¡œë”© ì‹¤íŒ¨ëŠ” ì•ˆì •ì„± ë¬¸ì œì˜ ì£¼ëœ ì›ì¸ì´ì—ˆìŠµë‹ˆë‹¤.
*   í•´ê²°ì±…: "ì™¸ë¶€ì— ì˜ì¡´í•˜ì§€ ì•ŠëŠ”ë‹¤" ë¼ëŠ” ì›ì¹™ì„ ì„¸ì› ìŠµë‹ˆë‹¤. Firebase, ToastUI Editor ë“± êµ¬ë™ì— í•„ìš”í•œ ëª¨ë“  ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ë¡œì»¬ì— ì €ì¥í•˜ê³ , `bundler.js`ë¥¼ í†µí•´ ì• í”Œë¦¬ì¼€ì´ì…˜ ì½”ë“œì™€ í•¨ê»˜ ë‹¨ì¼ íŒŒì¼(`main.js`, `main.css`)ë¡œ ê²°í•©(Bundling)í–ˆìŠµë‹ˆë‹¤.
*   ê²°ê³¼: ì´ ë°©ì‹ì€ Canvas í™˜ê²½ì˜ ì œì•½ì„ ê·¹ë³µí•˜ê³  ì¼ê´€ëœ ë¡œë”© ì„±ëŠ¥ì„ í™•ë³´í•˜ê¸° ìœ„í•œ í˜„ì‹¤ì ì¸ í•´ê²°ì±…ì´ì—ˆìŠµë‹ˆë‹¤. ë¸Œë¼ìš°ì €ëŠ” ë‹¨ ë‘ ë²ˆì˜ ìš”ì²­ë§Œìœ¼ë¡œ ì „ì²´ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ë¡œë“œí•  ìˆ˜ ìˆê²Œ ë˜ì—ˆê³ , ì´ëŠ” ì™¸ë¶€ í™˜ê²½ ë³€í™”ì— ì˜í–¥ì„ ë°›ì§€ ì•ŠëŠ” ì•ˆì •ì ì¸ êµ¬ì¡°ë¥¼ ì˜ë¯¸í•©ë‹ˆë‹¤.
*   
### 5. ê²°ë¡ : ìƒˆë¡œìš´ í‘œì¤€ ì•„í‚¤í…ì²˜
ì´ ê³¼ì •ì„ í†µí•´ í™•ë¦½ëœ 'ì˜ì¡´ì„± ë‚´ì¬í™” ë° ë™ì  ì£¼ì…' ì•„í‚¤í…ì²˜ëŠ” Ailey & Bailey Canvasì˜ ìƒˆë¡œìš´ í‘œì¤€ì´ ë˜ì—ˆìŠµë‹ˆë‹¤.
*   ì„±ëŠ¥ (Performance): AIì˜ ì‘ì—…ëŸ‰ì„ ì¤„ì´ê³  í´ë¼ì´ì–¸íŠ¸ ë Œë”ë§ì„ ìµœì í™”í–ˆìŠµë‹ˆë‹¤.
*   ì•ˆì •ì„± (Stability): ì™¸ë¶€ ë„¤íŠ¸ì›Œí¬ ì˜ì¡´ì„±ì„ ì œê±°í•˜ì—¬ ì•ˆì •ì ì¸ ë™ì‘ì„ í™•ë³´í–ˆìŠµë‹ˆë‹¤.
*   ë‹¨ìˆœì„± (Simplicity): `bundle/` ë””ë ‰í† ë¦¬ë§Œ ë°°í¬í•˜ë©´ ë˜ë¯€ë¡œ ê³¼ì •ì´ ë‹¨ìˆœí•´ì§‘ë‹ˆë‹¤.
*   
### 6. ë ˆí¬ì§€í† ë¦¬ êµ¬ì¡°
```
/ (Root)
â”œâ”€â”€ bundle/
â”‚   â”œâ”€â”€ main.js      # ëª¨ë“  JavaScript ë¼ì´ë¸ŒëŸ¬ë¦¬ì™€ ì•± ì†ŒìŠ¤ì½”ë“œê°€ í¬í•¨ëœ ìµœì¢… ë²ˆë“¤
â”‚   â””â”€â”€ main.css     # ëª¨ë“  CSS ìŠ¤íƒ€ì¼ì´ í¬í•¨ëœ ìµœì¢… ë²ˆë“¤
â”‚â”œâ”€â”€ .gitignore       # Git ì¶”ì  ì œì™¸ ì„¤ì •
â”œâ”€â”€ LICENSE          # Apache 2.0 ë¼ì´ì„ ìŠ¤
â””â”€â”€ README.md        # ë³¸ ë¬¸ì„œ
```
### 7. ì‚¬ìš©ë²• (Usage)
ì´ í”„ë¡œì íŠ¸ëŠ” Google Geminiì™€ Canvas íˆ´ì„ í†µí•´ ì‹¤í–‰ë©ë‹ˆë‹¤.
1.  í”„ë¡¬í”„íŠ¸ ë¡œë“œ: `prompt.txt(Ailey & Bailey X_xxxxxx(Stable).txt)` íŒŒì¼ì˜ ë‚´ìš© ì „ì²´ë¥¼ ë³µì‚¬í•©ë‹ˆë‹¤.
2.  Gemini í™œì„±í™”: [Google Gemini](https://gemini.google.com/)ì—ì„œ ìƒˆ ì±„íŒ…ì„ ì‹œì‘í•˜ê³ , ë³µì‚¬í•œ í”„ë¡¬í”„íŠ¸ë¥¼ ë¶™ì—¬ë„£ìŠµë‹ˆë‹¤. ì´ëŠ” AIë¥¼ 'Ailey & Bailey' ëª¨ë“œë¡œ ì„¤ì •í•©ë‹ˆë‹¤.
3.  Canvasì—ì„œ ì‹¤í–‰: Gemini ì¸í„°í˜ì´ìŠ¤ì—ì„œ Google Canvas íˆ´ì„ í™œì„±í™”í•˜ê³ , `.cc`ì™€ ê°™ì€ ëª…ë ¹ì–´ë¥¼ í†µí•´ ì• í”Œë¦¬ì¼€ì´ì…˜ê³¼ ìƒí˜¸ì‘ìš©í•©ë‹ˆë‹¤.
### 8. ë¼ì´ì„ ìŠ¤ (License)
ì´ í”„ë¡œì íŠ¸ëŠ” Apache License 2.0ì— ë”°ë¼ ë¼ì´ì„ ìŠ¤ê°€ ë¶€ì—¬ë©ë‹ˆë‹¤. ìì„¸í•œ ë‚´ìš©ì€ `LICENSE` íŒŒì¼ì„ ì°¸ê³ í•˜ì‹­ì‹œì˜¤.

---

## ğŸ‡ºğŸ‡¸ English

### 1. Abstract

This document records the architectural design process for the Ailey & Bailey Canvas system, where a Gemini language model dynamically generates web applications within the Google Canvas environment. To resolve response delays found in the initial version, we adopted a "Dependency Internalization and Dynamic Injection" architecture. This approach removes all external CDN dependencies, bundling required libraries into a single JavaScript file. This was a structural solution to secure stable performance within the unique constraints of the Google Canvas environment, such as its security policies (CSP) and network limitations. This document aims to record the design background and technical decision-making process behind this architecture.

### 2. The Starting Point: Why a New Architecture?

The initial architecture of Ailey & Bailey Canvas was straightforward: the AI generated complete HTML, CSS, and JavaScript code for each request. As application functionality grew, so did the amount of generated code, which led to response time issues.

A more fundamental constraint was the Google Canvas execution environment. Its Content Security Policy (CSP) blocks script loading from untrusted external sources. This caused timeout errors when attempting to load core libraries like Firebase via CDN, making it difficult to ensure system stability.

We therefore decided to rethink the structure, starting from a fundamental question: "Given the constraints of the Canvas environment, what is the most efficient and stable way to run our application?"

### 3. How It Works

The architecture is based on the roles of two key components:

1.  The Architect (AI/Gemini): Interprets user requirements and generates the "content" and "execution commands."
2.  The Builder (Client): Executes in the user's browser. It holds a pre-defined UI "shell" and assembles the content into the final product based on the AI's commands. All the Builder's tools are embedded within the `bundle/main.js` and `bundle/main.css` files.

Instead of the AI constructing the entire application (Full HTML) each time, the new model has the AI send a lightweight instruction (Loader Script) that says, "Take this content ('dynamicContent') and complete the application according to the blueprint (`renderAppShell` function)." The client is responsible for the actual implementation.

### 4. Architectural Decisions

Based on this principle, we made two key technical decisions.

#### Decision 1: Separation of Concerns via Dynamic Injection

*   Problem: The AI repeatedly generating the same UI shell code was an inefficient structure.
*   Solution: The UI shell was embedded as a template once within the client-side `bundle/main.js`. The AI now only generates the core "content," and the client injects this content into a designated placeholder (`ai-content-placeholder`) to complete the UI.
*   Result: The amount of data generated by the AI was significantly reduced, which in turn led to shorter response times.

#### Decision 2: Consolidation of Resources via Dependency Internalization & Bundling

*   Problem: Failures in loading libraries from CDNs due to the Canvas security policy were a primary cause of stability issues.
*   Solution: We adopted the principle of "no external dependencies." All required libraries (Firebase, ToastUI Editor, etc.) were saved locally and consolidated (bundled) with the application source code into single files (`main.js`, `main.css`) using a `bundler.js` script.
*   Result: This approach was a practical solution for overcoming the environment's constraints and ensuring consistent loading performance. The browser can load the entire application with just two network requests, creating a stable structure unaffected by external factors.

### 5. Conclusion: The New Standard Architecture

The "Dependency Internalization and Dynamic Injection" architecture established through this process has become the new standard for the project.

*   Performance: Reduced AI workload and optimized client-side rendering.
*   Stability: Secured stable operation by eliminating external network dependencies.
*   Simplicity: The deployment process is simplified, as it only requires the `bundle/` directory.

### 6. Repository Structure
